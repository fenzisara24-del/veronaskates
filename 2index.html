
<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VeronaSkates - Consulenza Slalom Freestyle</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
        }

        body {
            background: #f0f4f8;
            min-height: 100vh;
        }

        /* Header */
        .team-header {
            background: linear-gradient(135deg, #0b1e3a 0%, #1e3c72 100%);
            padding: 20px;
            color: white;
            box-shadow: 0 4px 20px rgba(0,0,0,0.2);
        }

        .header-container {
            max-width: 1400px;
            margin: 0 auto;
            display: flex;
            align-items: center;
            justify-content: space-between;
            flex-wrap: wrap;
            gap: 20px;
        }

        .logo-area {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .logo {
            background: white;
            color: #1e3c72;
            width: 70px;
            height: 70px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            font-weight: 800;
        }

        .team-title h1 {
            font-size: 2.5rem;
            margin-bottom: 5px;
        }

        .team-title p {
            opacity: 0.9;
            font-size: 1.1rem;
        }

        .qr-code {
            background: white;
            padding: 10px;
            border-radius: 15px;
            text-align: center;
            color: #1e3c72;
            font-weight: 600;
            cursor: pointer;
        }

        .qr-code span {
            font-size: 2rem;
            display: block;
        }

        /* Layout principale */
        .main-container {
            max-width: 1400px;
            margin: 30px auto;
            padding: 0 20px;
            display: grid;
            grid-template-columns: 400px 1fr;
            gap: 30px;
        }

        /* Sidebar filtri */
        .filters-sidebar {
            background: white;
            border-radius: 30px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.08);
            height: fit-content;
            position: sticky;
            top: 20px;
            max-height: calc(100vh - 40px);
            overflow-y: auto;
        }

        .filters-title {
            font-size: 1.6rem;
            color: #1e3c72;
            margin-bottom: 25px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .reset-btn {
            background: #f0f4f8;
            border: none;
            padding: 8px 15px;
            border-radius: 50px;
            cursor: pointer;
            font-size: 0.9rem;
        }

        .filter-group {
            margin-bottom: 25px;
            border-bottom: 1px solid #eef2f7;
            padding-bottom: 20px;
        }

        .filter-label {
            display: block;
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 12px;
            font-size: 1.1rem;
        }

        .filter-input, .filter-select {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #e1e8f0;
            border-radius: 15px;
            font-size: 1rem;
            transition: all 0.2s;
        }

        .filter-input:focus {
            outline: none;
            border-color: #1e3c72;
        }

        /* Misura piede con convertitore */
        .measure-converter {
            display: flex;
            gap: 10px;
            align-items: center;
        }

        .measure-converter input {
            flex: 1;
        }

        .convert-btn {
            background: #1e3c72;
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 15px;
            cursor: pointer;
            font-weight: 600;
            white-space: nowrap;
        }

        .measure-diagram {
            background: #f8fafd;
            padding: 15px;
            border-radius: 15px;
            margin: 15px 0;
            display: flex;
            align-items: center;
            gap: 15px;
            cursor: pointer;
        }

        .measure-diagram:hover {
            background: #e1e8f0;
        }

        .diagram-icon {
            font-size: 2rem;
        }

        /* Radio e checkbox personalizzati */
        .radio-group, .checkbox-group {
            background: #f8fafd;
            border-radius: 15px;
            padding: 15px;
        }

        .radio-option, .checkbox-option {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 12px;
            font-size: 0.95rem;
        }

        .radio-option:last-child, .checkbox-option:last-child {
            margin-bottom: 0;
        }

        /* Range prezzi */
        .price-range {
            display: flex;
            gap: 10px;
            align-items: center;
        }

        .price-range input {
            width: 100%;
            padding: 10px;
        }

        /* Tabs */
        .tabs {
            display: flex;
            gap: 5px;
            margin-bottom: 15px;
            flex-wrap: wrap;
        }

        .tab {
            background: #f0f4f8;
            padding: 10px 20px;
            border-radius: 30px;
            cursor: pointer;
            font-size: 0.9rem;
            border: none;
        }

        .tab.active {
            background: #1e3c72;
            color: white;
        }

        /* Area risultati */
        .results-area {
            background: transparent;
        }

        .results-header {
            background: white;
            border-radius: 20px;
            padding: 20px;
            margin-bottom: 25px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 15px;
        }

        .results-count {
            font-size: 1.2rem;
        }

        .results-count span {
            font-weight: 700;
            color: #1e3c72;
            font-size: 1.5rem;
        }

        .view-controls {
            display: flex;
            gap: 10px;
        }

        .view-btn {
            background: none;
            border: 2px solid #e1e8f0;
            padding: 8px 15px;
            border-radius: 30px;
            cursor: pointer;
        }

        .view-btn.active {
            background: #1e3c72;
            color: white;
            border-color: #1e3c72;
        }

        .compare-bar {
            background: #1e3c72;
            color: white;
            padding: 15px;
            border-radius: 15px;
            margin-bottom: 20px;
            display: none;
            justify-content: space-between;
            align-items: center;
        }

        .compare-bar.show {
            display: flex;
        }

        .compare-btn {
            background: #ffd700;
            color: #1e3c72;
            border: none;
            padding: 10px 20px;
            border-radius: 30px;
            font-weight: 600;
            cursor: pointer;
        }

        /* Griglia pattini */
        .skates-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 25px;
            transition: all 0.3s;
        }

        .skates-grid.list-view {
            grid-template-columns: 1fr;
        }

        .skate-card {
            background: white;
            border-radius: 25px;
            overflow: hidden;
            box-shadow: 0 10px 20px rgba(0,0,0,0.05);
            transition: all 0.2s;
            border: 1px solid #eef2f7;
            position: relative;
        }

        .skate-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 30px rgba(0,0,0,0.1);
        }

        .compare-check {
            position: absolute;
            top: 15px;
            right: 15px;
            z-index: 10;
        }

        .compare-check input {
            width: 20px;
            height: 20px;
            cursor: pointer;
        }

        .skate-image {
            width: 100%;
            height: 200px;
            background: #f0f4fa;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 4rem;
            border-bottom: 3px solid #eef2f7;
        }

        .skate-info {
            padding: 20px;
        }

        .skate-name {
            font-size: 1.4rem;
            font-weight: 700;
            color: #1e3c72;
            margin-bottom: 5px;
        }

        .skate-brand {
            color: #7f8c8d;
            font-size: 0.9rem;
            margin-bottom: 10px;
        }

        .skate-price {
            font-size: 1.8rem;
            font-weight: 700;
            color: #27ae60;
            margin: 10px 0;
        }

        .skate-specs {
            display: flex;
            gap: 10px;
            margin: 10px 0;
            flex-wrap: wrap;
        }

        .spec-tag {
            background: #f0f4f8;
            padding: 5px 12px;
            border-radius: 50px;
            font-size: 0.85rem;
        }

        .skate-match {
            background: #e3f2fd;
            color: #1e3c72;
            padding: 8px 15px;
            border-radius: 50px;
            font-size: 0.9rem;
            font-weight: 600;
            display: inline-block;
            margin: 10px 0;
        }

        .skate-features {
            list-style: none;
            margin: 15px 0;
        }

        .skate-features li {
            padding: 5px 0;
            font-size: 0.95rem;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .skate-features li::before {
            content: "‚úì";
            color: #1e3c72;
            font-weight: 700;
        }

        .skate-links {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin-top: 15px;
        }

        .skate-link {
            background: #f0f4f8;
            color: #1e3c72;
            text-decoration: none;
            padding: 8px 15px;
            border-radius: 30px;
            font-size: 0.9rem;
            transition: all 0.2s;
            flex: 1;
            text-align: center;
        }

        .skate-link:hover {
            background: #1e3c72;
            color: white;
        }

        /* Vista comparazione */
        .comparison-view {
            background: white;
            border-radius: 30px;
            padding: 30px;
            margin-top: 30px;
            display: none;
        }

        .comparison-view.show {
            display: block;
        }

        .comparison-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
        }

        /* Glossario */
        .glossary-section {
            background: white;
            border-radius: 30px;
            padding: 30px;
            margin: 40px 0;
        }

        .glossary-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .glossary-item {
            background: #f8fafd;
            padding: 20px;
            border-radius: 20px;
        }

        .glossary-item h4 {
            color: #1e3c72;
            margin-bottom: 10px;
        }

        /* Video tutorial */
        .tutorial-section {
            background: white;
            border-radius: 30px;
            padding: 30px;
            margin: 40px 0;
        }

        .video-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .video-card {
            background: #f8fafd;
            border-radius: 20px;
            overflow: hidden;
            cursor: pointer;
        }

        .video-thumb {
            height: 180px;
            background: #1e3c72;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 3rem;
        }

        .video-info {
            padding: 15px;
        }

        /* Mobile optimization */
        @media (max-width: 900px) {
            .main-container {
                grid-template-columns: 1fr;
            }
            
            .filters-sidebar {
                position: static;
                max-height: none;
            }
            
            .header-container {
                flex-direction: column;
                text-align: center;
            }
            
            .logo-area {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <header class="team-header">
        <div class="header-container">
            <div class="logo-area">
                <div class="logo">VS</div>
                <div class="team-title">
                    <h1>VERONASKATES</h1>
                    <p>Freestyle Slalom ¬∑ Consulenza professionale</p>
                </div>
            </div>
            <div class="qr-code" onclick="showMobileView()">
                <span>üì±</span>
                Versione Mobile
            </div>
        </div>
    </header>

    <div class="main-container">
        <!-- Sidebar filtri migliorata -->
        <aside class="filters-sidebar">
            <div class="filters-title">
                Filtri avanzati
                <button class="reset-btn" onclick="resetAllFilters()">‚ü≤ Reset</button>
            </div>

            <!-- MISURAZIONE PIEDE CON CONVERTITORE -->
            <div class="filter-group">
                <label class="filter-label">üëü Misura piede</label>
                
                <div class="measure-converter">
                    <input type="number" id="footCm" class="filter-input" step="0.1" placeholder="cm" oninput="convertFromCm()">
                    <button class="convert-btn" onclick="showMeasureGuide()">üìè Guida</button>
                </div>
                
                <div class="measure-converter" style="margin-top:10px;">
                    <input type="number" id="shoeEu" class="filter-input" placeholder="EU" oninput="convertFromEu()">
                    <span style="padding:0 5px;">‚Üí</span>
                    <input type="number" id="shoeUs" class="filter-input" placeholder="US" oninput="convertFromUs()">
                </div>

                <div class="measure-diagram" onclick="showMeasureGuide()">
                    <span class="diagram-icon">ü¶∂</span>
                    <div>
                        <strong>Come misurare?</strong>
                        <p style="font-size:0.85rem;">Clicca per vedere il diagramma</p>
                    </div>
                </div>

                <div style="margin-top:15px;">
                    <label class="filter-label">Piede sinistro e destro diversi?</label>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" name="footDiff" id="same" value="same" checked>
                            <label for="same">Stessa misura</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="footDiff" id="different" value="different">
                            <label for="different">Leggermente diversi</label>
                        </div>
                    </div>
                </div>
            </div>

            <!-- LIVELLI CON SOTTOCATEGORIE -->
            <div class="filter-group">
                <label class="filter-label">üèÜ Livello</label>
                <div class="tabs">
                    <button class="tab active" onclick="setLevel('beginner')">Principiante</button>
                    <button class="tab" onclick="setLevel('intermediate')">Intermedio</button>
                    <button class="tab" onclick="setLevel('advanced')">Avanzato</button>
                </div>
                
                <div id="sublevelContainer" style="margin-top:15px;">
                    <select class="filter-select" id="subLevel">
                        <option value="beginner1">Primi passi (0-6 mesi)</option>
                        <option value="beginner2">Qualche esperienza (6-12 mesi)</option>
                        <option value="intermediate1">Non agonista ma costante</option>
                        <option value="intermediate2">Allenamenti regolari</option>
                        <option value="advanced1">Agonista freestyle slalom</option>
                        <option value="advanced2">Agonista avanzato/gare</option>
                    </select>
                </div>
            </div>

            <!-- CARATTERISTICHE PIEDE AVANZATE -->
            <div class="filter-group">
                <label class="filter-label">ü¶∂ Caratteristiche piede</label>
                
                <div style="margin-bottom:15px;">
                    <label>Pianta:</label>
                    <select class="filter-select" id="footShape">
                        <option value="normal">Normale</option>
                        <option value="wide">Larga</option>
                        <option value="narrow">Stretta</option>
                    </select>
                </div>

                <div style="margin-bottom:15px;">
                    <label>Larghezza pianta (cm):</label>
                    <input type="number" id="footWidth" class="filter-input" step="0.1" placeholder="es. 9.5">
                </div>

                <div style="margin-bottom:15px;">
                    <label>Altezza collo piede:</label>
                    <select class="filter-select" id="instep">
                        <option value="low">Basso</option>
                        <option value="normal">Normale</option>
                        <option value="high">Alto</option>
                    </select>
                    <p style="font-size:0.8rem; margin-top:5px;">Come misurare: piega la gamba, il punto pi√π alto della piega</p>
                </div>

                <div style="margin-bottom:15px;">
                    <label>Problemi specifici:</label>
                    <div class="checkbox-group">
                        <div class="checkbox-option">
                            <input type="checkbox" id="fascite" value="fascite">
                            <label for="fascite">Fascite plantare</label>
                        </div>
                        <div class="checkbox-option">
                            <input type="checkbox" id="talloni" value="talloni">
                            <label for="talloni">Talloni sensibili</label>
                        </div>
                        <div class="checkbox-option">
                            <input type="checkbox" id="alluce" value="alluce">
                            <label for="alluce">Alluce valgo</label>
                        </div>
                    </div>
                </div>
            </div>

            <!-- SPECIFICHE TECNICHE SLALOM -->
            <div class="filter-group">
                <label class="filter-label">‚õ∏Ô∏è Specifiche pattino</label>
                
                <div style="margin-bottom:15px;">
                    <label>Materiale scafo:</label>
                    <select class="filter-select" id="shellMaterial">
                        <option value="any">Qualsiasi</option>
                        <option value="plastic">Plastica</option>
                        <option value="fiber">Fibra</option>
                        <option value="carbon">Carbonio</option>
                    </select>
                </div>

                <div style="margin-bottom:15px;">
                    <label>Configurazione ruote:</label>
                    <select class="filter-select" id="wheelConfig">
                        <option value="any">Qualsiasi</option>
                        <option value="84_72">Carrello 84/72</option>
                        <option value="72_68">Carrello 72/68</option>
                        <option value="both">Entrambi intercambiabili</option>
                    </select>
                </div>
            </div>

            <!-- MARCHE E PREZZO -->
            <div class="filter-group">
                <label class="filter-label">üè∑Ô∏è Marche e prezzo</label>
                
                <div style="margin-bottom:15px;">
                    <label>Marche preferite:</label>
                    <div class="checkbox-group">
                        <div class="checkbox-option">
                            <input type="checkbox" id="fr" value="FR">
                            <label for="fr">FR Skates</label>
                        </div>
                        <div class="checkbox-option">
                            <input type="checkbox" id="micro" value="Micro">
                            <label for="micro">Micro</label>
                        </div>
                        <div class="checkbox-option">
                            <input type="checkbox" id="aliexpress" value="Aliexpress">
                            <label for="aliexpress">Aliexpress</label>
                        </div>
                        <div class="checkbox-option">
                            <input type="checkbox" id="powerslide" value="Powerslide">
                            <label for="powerslide">Powerslide</label>
                        </div>
                        <div class="checkbox-option">
                            <input type="checkbox" id="seba" value="Seba">
                            <label for="seba">Seba</label>
                        </div>
                    </div>
                </div>

                <div style="margin-bottom:15px;">
                    <label>Fascia prezzo (‚Ç¨):</label>
                    <div class="price-range">
                        <input type="number" id="minPrice" placeholder="Min" class="filter-input">
                        <span>-</span>
                        <input type="number" id="maxPrice" placeholder="Max" class="filter-input">
                    </div>
                    <div style="display:flex; gap:5px; margin-top:10px; flex-wrap:wrap;">
                        <button class="tab" onclick="setPriceRange(0,200)">0-200‚Ç¨</button>
                        <button class="tab" onclick="setPriceRange(200,400)">200-400‚Ç¨</button>
                        <button class="tab" onclick="setPriceRange(400,1000)">400‚Ç¨+</button>
                    </div>
                </div>
            </div>

            <!-- NEGOZI -->
            <div class="filter-group">
                <label class="filter-label">üè™ Negozi disponibili</label>
                <div class="checkbox-group">
                    <div class="checkbox-option">
                        <input type="checkbox" id="freemove" value="Freemove" checked>
                        <label for="freemove">Freemove</label>
                    </div>
                    <div class="checkbox-option">
                        <input type="checkbox" id="diana" value="Diana Sport" checked>
                        <label for="diana">Diana Sport</label>
                    </div>
                    <div class="checkbox-option">
                        <input type="checkbox" id="negozio" value="Negozio Freestyle" checked>
                        <label for="negozio">Negozio del Freestyle</label>
                    </div>
                </div>
            </div>
        </aside>

        <!-- Area risultati principale -->
        <main class="results-area">
            <div class="results-header">
                <div class="results-count">
                    <span id="resultCount">8</span> pattini trovati
                </div>
                <div class="view-controls">
                    <button class="view-btn active" onclick="setView('grid')">üì± Griglia</button>
                    <button class="view-btn" onclick="setView('list')">üìã Lista</button>
                    <button class="view-btn" onclick="showComparison()">‚öñÔ∏è Confronta</button>
                </div>
            </div>

            <!-- Barra confronto -->
            <div class="compare-bar" id="compareBar">
                <span><span id="compareCount">0</span> pattini selezionati per confronto</span>
                <button class="compare-btn" onclick="compareSelected()">Confronta ora</button>
            </div>

            <!-- Griglia pattini dinamica -->
            <div class="skates-grid" id="skatesGrid"></div>

            <!-- Sezione confronto (inizialmente nascosta) -->
            <div class="comparison-view" id="comparisonView">
                <h2 style="color:#1e3c72; margin-bottom:20px;">‚öñÔ∏è Confronto pattini</h2>
                <div class="comparison-grid" id="comparisonGrid"></div>
                <button style="margin-top:20px; padding:10px 20px;" onclick="closeComparison()">Chiudi confronto</button>
            </div>

            <!-- Glossario interattivo -->
            <div class="glossary-section">
                <h2 style="color:#1e3c72; margin-bottom:20px;">üìö Glossario tecnico</h2>
                <div class="glossary-grid">
                    <div class="glossary-item">
                        <h4>ABEC</h4>
                        <p>Classificazione precisione cuscinetti. Per slalom consigliato ABEC 7 o 9.</p>
                    </div>
                    <div class="glossary-item">
                        <h4>Durezza ruote (85A)</h4>
                        <p>Pi√π alto = pi√π duro e scorrevole. Per slalom 85A-90A ideale.</p>
                    </div>
                    <div class="glossary-item">
                        <h4>Carrello 84/72</h4>
                        <p>Configurazione con ruote grandi al centro per stabilit√† nello slalom.</p>
                    </div>
                    <div class="glossary-item">
                        <h4>Rockering</h4>
                        <p>Disposizione ruote per curva pi√π facile. Pu√≤ essere naturale o regolabile.</p>
                    </div>
                </div>
            </div>

            <!-- Video tutorial -->
            <div class="tutorial-section">
                <h2 style="color:#1e3c72; margin-bottom:20px;">üé• Video tutorial</h2>
                <div class="video-grid">
                    <div class="video-card" onclick="playVideo('misurazione')">
                        <div class="video-thumb">üìè</div>
                        <div class="video-info">
                            <h4>Come misurare il piede</h4>
                            <p>Guida passo passo con diagramma</p>
                        </div>
                    </div>
                    <div class="video-card" onclick="playVideo('regolazione')">
                        <div class="video-thumb">üîß</div>
                        <div class="video-info">
                            <h4>Regolare i pattini da slalom</h4>
                            <p>Telaio, ruote e lacci</p>
                        </div>
                    </div>
                    <div class="video-card" onclick="playVideo('manutenzione')">
                        <div class="video-thumb">üßπ</div>
                        <div class="video-info">
                            <h4>Manutenzione cuscinetti</h4>
                            <p>Pulizia e lubrificazione</p>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script>
        // Database pattini aggiornato con specifiche slalom
        const skates = [
            {
                id: 1,
                name: "FR Slalom Pro",
                brand: "FR Skates",
                price: 449,
                image: "üéØ",
                level: "advanced",
                sublevel: "advanced1,advanced2",
                footShape: ["normal", "wide"],
                footWidth: { min: 9, max: 11 },
                instep: ["normal", "high"],
                shell: "carbon",
                wheelConfig: "both",
                problems: [],
                colors: ["nero", "rosso"],
                features: [
                    "Telaio in alluminio 243mm",
                    "Rockering regolabile",
                    "Cuscinetti ABEC 9",
                    "Ideale per agonisti slalom"
                ],
                stores: ["Freemove", "Negozio del Freestyle"],
                minFoot: 24,
                maxFoot: 29
            },
            {
                id: 2,
                name: "Micro Delta F",
                brand: "Micro",
                price: 299,
                image: "‚ö°",
                level: "intermediate",
                sublevel: "intermediate1,intermediate2",
                footShape: ["normal", "narrow"],
                footWidth: { min: 8, max: 10 },
                instep: ["low", "normal"],
                shell: "fiber",
                wheelConfig: "84_72",
                problems: ["fascite"],
                colors: ["blu", "argento"],
                features: [
                    "Scafo in fibra di vetro",
                    "Chiusura micrometrica",
                    "Ruote 84/72mm",
                    "Per chi si allena regolarmente"
                ],
                stores: ["Diana Sport", "Freemove"],
                minFoot: 22,
                maxFoot: 28
            },
            {
                id: 3,
                name: "Powerslide Next Core",
                brand: "Powerslide",
                price: 329,
                image: "üöÄ",
                level: "intermediate,advanced",
                sublevel: "intermediate2,advanced1",
                footShape: ["wide"],
                footWidth: { min: 10, max: 12 },
                instep: ["high"],
                shell: "fiber",
                wheelConfig: "72_68",
                problems: [],
                colors: ["nero", "giallo"],
                features: [
                    "Scafo Trinity",
                    "Ruote 72/68 per slalom",
                    "Cuscinetti Wicked ABEC 7",
                    "Ottimo rapporto qualit√†/prezzo"
                ],
                stores: ["Freemove", "Negozio del Freestyle"],
                minFoot: 25,
                maxFoot: 31
            },
            {
                id: 4,
                name: "Seba Trix 2 Carbon",
                brand: "Seba",
                price: 589,
                image: "üåü",
                level: "advanced",
                sublevel: "advanced1,advanced2",
                footShape: ["normal", "narrow"],
                footWidth: { min: 8, max: 10 },
                instep: ["normal"],
                shell: "carbon",
                wheelConfig: "both",
                problems: [],
                colors: ["nero", "rosso", "bianco"],
                features: [
                    "Carbonio ad alte prestazioni",
                    "Telaio regolabile",
                    "Cuscinetti ILQ-9",
                    "Usato da campioni di slalom"
                ],
                stores: ["Negozio del Freestyle"],
                minFoot: 23,
                maxFoot: 29
            },
            {
                id: 5,
                name: "Aliexpress Pro S8",
                brand: "Aliexpress",
                price: 129,
                image: "üì¶",
                level: "beginner",
                sublevel: "beginner1,beginner2",
                footShape: ["normal", "wide", "narrow"],
                footWidth: { min: 8, max: 11 },
                instep: ["low", "normal", "high"],
                shell: "plastic",
                wheelConfig: "84_72",
                problems: [],
                colors: ["nero", "blu", "rosso"],
                features: [
                    "Economico per iniziare",
                    "Regolabile di 4 misure",
                    "Ruote incluse",
                    "Ideale per primi passi"
                ],
                stores: ["Aliexpress"],
                minFoot: 23,
                maxFoot: 30
            },
            {
                id: 6,
                name: "FRW Slalom 72",
                brand: "Aliexpress",
                price: 189,
                image: "‚öôÔ∏è",
                level: "intermediate",
                sublevel: "intermediate1,intermediate2",
                footShape: ["normal", "wide"],
                footWidth: { min: 9, max: 11 },
                instep: ["normal", "high"],
                shell: "fiber",
                wheelConfig: "72_68",
                problems: ["talloni"],
                colors: ["nero", "verde"],
                features: [
                    "Buon rapporto qualit√†/prezzo",
                    "Telaio in alluminio",
                    "Adatto anche a talloni sensibili"
                ],
                stores: ["Aliexpress", "Freemove"],
                minFoot: 24,
                maxFoot: 30
            },
            {
                id: 7,
                name: "Micro MT Plus Slalom",
                brand: "Micro",
                price: 219,
                image: "üëü",
                level: "beginner,intermediate",
                sublevel: "beginner2,intermediate1",
                footShape: ["wide", "growing"],
                footWidth: { min: 9, max: 11 },
                instep: ["normal"],
                shell: "plastic",
                wheelConfig: "84_72",
                problems: [],
                colors: ["blu", "arancione"],
                features: [
                    "Regolabile di 4 misure",
                    "Ruote LED opzionali",
                    "Per giovani in crescita"
                ],
                stores: ["Diana Sport"],
                minFoot: 25,
                maxFoot: 32
            },
            {
                id: 8,
                name: "Powerslide Swell Lite",
                brand: "Powerslide",
                price: 269,
                image: "üí®",
                level: "beginner,intermediate",
                sublevel: "beginner2,intermediate1",
                footShape: ["narrow"],
                footWidth: { min: 7.5, max: 9 },
                instep: ["low"],
                shell: "fiber",
                wheelConfig: "84_72",
                problems: ["fascite"],
                colors: ["rosa", "viola"],
                features: [
                    "Leggero e confortevole",
                    "Plantare ortopedico",
                    "Buono per fascite plantare"
                ],
                stores: ["Freemove"],
                minFoot: 22,
                maxFoot: 27
            }
        ];

        // Stato applicazione
        let compareList = [];
        let currentView = 'grid';
        let currentLevel = 'beginner';

        // Funzioni di utilit√†
        function showMobileView() {
            alert("üì± Versione mobile semplificata attivata! (simulata)");
        }

        function showMeasureGuide() {
            alert(`üìè COME MISURARE IL PIEDE:\n\n1. Metti un foglio contro il muro\n2. Appoggia il tallone al muro\n3. Segna la punta pi√π lunga\n4. Misura in cm dal bordo foglio\n\nü¶∂ Se i piedi sono diversi, usa la misura pi√π grande e aggiungi 0.5cm di margine.`);
        }

        function convertFromCm() {
            const cm = parseFloat(document.getElementById('footCm').value);
            if (!isNaN(cm)) {
                const eu = Math.round(cm * 1.5 + 33);
                const us = Math.round(cm * 1.5 + 31);
                document.getElementById('shoeEu').value = eu;
                document.getElementById('shoeUs').value = us;
            }
        }

        function convertFromEu() {
            const eu = parseFloat(document.getElementById('shoeEu').value);
            if (!isNaN(eu)) {
                const cm = Math.round((eu - 33) / 1.5 * 10) / 10;
                const us = Math.round(eu - 2);
                document.getElementById('footCm').value = cm;
                document.getElementById('shoeUs').value = us;
            }
        }

        function convertFromUs() {
            const us = parseFloat(document.getElementById('shoeUs').value);
            if (!isNaN(us)) {
                const cm = Math.round((us - 31) / 1.5 * 10) / 10;
                const eu = Math.round(us + 2);
                document.getElementById('footCm').value = cm;
                document.getElementById('shoeEu').value = eu;
            }
        }

        function setLevel(level) {
            currentLevel = level;
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            event.target.classList.add('active');
            updateSublevelOptions();
            filterSkates();
        }

        function updateSublevelOptions() {
            const select = document.getElementById('subLevel');
            const options = {
                beginner: ['beginner1:Primi passi (0-6 mesi)', 'beginner2:Qualche esperienza (6-12 mesi)'],
                intermediate: ['intermediate1:Non agonista ma costante', 'intermediate2:Allenamenti regolari'],
                advanced: ['advanced1:Agonista freestyle slalom', 'advanced2:Agonista avanzato/gare']
            };
            
            select.innerHTML = options[currentLevel].map(opt => {
                const [value, text] = opt.split(':');
                return `<option value="${value}">${text}</option>`;
            }).join('');
        }

        function setPriceRange(min, max) {
            document.getElementById('minPrice').value = min;
            document.getElementById('maxPrice').value = max;
            filterSkates();
        }

        function setView(view) {
            currentView = view;
            document.querySelector('.skates-grid').className = view === 'grid' ? 'skates-grid' : 'skates-grid list-view';
            document.querySelectorAll('.view-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
        }

        // Funzione filtro principale
        function filterSkates() {
            const footCm = parseFloat(document.getElementById('footCm').value);
            const footDiff = document.querySelector('input[name="footDiff"]:checked').value;
            const subLevel = document.getElementById('subLevel').value;
            const footShape = document.getElementById('footShape').value;
            const footWidth = parseFloat(document.getElementById('footWidth').value);
            const instep = document.getElementById('instep').value;
            const shellMaterial = document.getElementById('shellMaterial').value;
            const wheelConfig = document.getElementById('wheelConfig').value;
            const minPrice = parseFloat(document.getElementById('minPrice').value) || 0;
            const maxPrice = parseFloat(document.getElementById('maxPrice').value) || 10000;
            
            const problems = [];
            if (document.getElementById('fascite').checked) problems.push('fascite');
            if (document.getElementById('talloni').checked) problems.push('talloni');
            if (document.getElementById('alluce').checked) problems.push('alluce');

            const brands = [];
            if (document.getElementById('fr').checked) brands.push('FR Skates');
            if (document.getElementById('micro').checked) brands.push('Micro');
            if (document.getElementById('aliexpress').checked) brands.push('Aliexpress');
            if (document.getElementById('powerslide').checked) brands.push('Powerslide');
            if (document.getElementById('seba').checked) brands.push('Seba');

            const stores = [];
            if (document.getElementById('freemove').checked) stores.push('Freemove');
            if (document.getElementById('diana').checked) stores.push('Diana Sport');
            if (document.getElementById('negozio').checked) stores.push('Negozio del Freestyle');

            let filtered = skates.filter(skate => {
                // Livello e sottolivello
                if (!skate.sublevel.includes(subLevel)) return false;

                // Prezzo
                if (skate.price < minPrice || skate.price > maxPrice) return false;

                // Forma piede
                if (!skate.footShape.includes(footShape)) return false;

                // Larghezza piede
                if (footWidth && !isNaN(footWidth)) {
                    if (footWidth < skate.footWidth.min || footWidth > skate.footWidth.max) return false;
                }

                // Collo piede
                if (!skate.instep.includes(instep)) return false;

                // Problemi specifici
                if (problems.length > 0) {
                    const hasProblem = problems.every(p => skate.problems.includes(p));
                    if (!hasProblem) return false;
                }

                // Materiale scafo
                if (shellMaterial !== 'any' && skate.shell !== shellMaterial) return false;

                // Configurazione ruote
                if (wheelConfig !== 'any' && !skate.wheelConfig.includes(wheelConfig)) return false;

                // Marche
                if (brands.length > 0 && !brands.includes(skate.brand)) return false;

                // Negozi
                if (stores.length > 0 && !skate.stores.some(s => stores.includes(s))) return false;

                // Misura piede
                if (footCm && !isNaN(footCm)) {
                    if (footDiff === 'different') {
                        if (footCm < skate.minFoot - 0.5 || footCm > skate.maxFoot + 0.5) return false;
                    } else {
                        if (footCm < skate.minFoot || footCm > skate.maxFoot) return false;
                    }
                }

                return true;
            });

            displaySkates(filtered);
        }

        function displaySkates(skatesToShow) {
            const grid = document.getElementById('skatesGrid');
            const countSpan = document.getElementById('resultCount');
            
            countSpan.textContent = skatesToShow.length;

            if (skatesToShow.length === 0) {
                grid.innerHTML = `
                    <div style="grid-column:1/-1; text-align:center; padding:60px; background:white; border-radius:30px;">
                        <p style="font-size:1.5rem;">Nessun pattino trovato</p>
                        <button onclick="resetAllFilters()" style="margin-top:20px; padding:15px 30px;">Reset filtri</button>
                    </div>
                `;
                return;
            }

            let html = '';
            skatesToShow.forEach(skate => {
                const storeLinks = skate.stores.map(store => {
                    let url = '#';
                    if (store === 'Freemove') url = 'https://freemove.it';
                    if (store === 'Diana Sport') url = 'https://dianasport.it';
                    if (store === 'Negozio del Freestyle') url = '#';
                    if (store === 'Aliexpress') url = 'https://aliexpress.com';
                    return `<a href="${url}" class="skate-link" target="_blank">${store}</a>`;
                }).join('');

                const matchBadge = skate.level.includes('advanced') ? 
                    '<div class="skate-match">üèÜ Consigliato agonisti slalom</div>' : '';

                html += `
                    <div class="skate-card">
                        <div class="compare-check">
                            <input type="checkbox" onchange="toggleCompare(${skate.id})" ${compareList.includes(skate.id) ? 'checked' : ''}>
                        </div>
                        <div class="skate-image">${skate.image}</div>
                        <div class="skate-info">
                            <div class="skate-name">${skate.name}</div>
                            <div class="skate-brand">${skate.brand}</div>
                            <div class="skate-price">‚Ç¨ ${skate.price}</div>
                            ${matchBadge}
                            <ul class="skate-features">
                                ${skate.features.map(f => `<li>${f}</li>`).join('')}
                                <li>üëü Adatto piedi ${skate.minFoot}-${skate.maxFoot} cm</li>
                                <li>‚öôÔ∏è Scafo ${skate.shell}</li>
                            </ul>
                            <div class="skate-links">
                                ${storeLinks}
                            </div>
                        </div>
                    </div>
                `;
            });

            grid.innerHTML = html;
        }

        function toggleCompare(skateId) {
            if (compareList.includes(skateId)) {
                compareList = compareList.filter(id => id !== skateId);
            } else {
                if (compareList.length < 3) {
                    compareList.push(skateId);
                } else {
                    alert('Puoi confrontare massimo 3 pattini alla volta');
                    return;
                }
            }
            
            document.getElementById('compareCount').textContent = compareList.length;
            document.getElementById('compareBar').classList.toggle('show', compareList.length >= 2);
        }

        function compareSelected() {
            if (compareList.length < 2) {
                alert('Seleziona almeno 2 pattini da confrontare');
                return;
            }

            const comparisonGrid = document.getElementById('comparisonGrid');
            const skatesToCompare = skates.filter(s => compareList.includes(s.id));
            
            let html = '';
            skatesToCompare.forEach(skate => {
                html += `
                    <div style="background:#f8fafd; padding:20px; border-radius:20px;">
                        <div style="font-size:3rem; text-align:center;">${skate.image}</div>
                        <h3 style="margin:10px 0;">${skate.name}</h3>
                        <p><strong>Brand:</strong> ${skate.brand}</p>
                        <p><strong>Prezzo:</strong> ‚Ç¨${skate.price}</p>
                        <p><strong>Scafo:</strong> ${skate.shell}</p>
                        <p><strong>Ruote:</strong> ${skate.wheelConfig}</p>
                        <p><strong>Piede:</strong> ${skate.minFoot}-${skate.maxFoot} cm</p>
                        <p><strong>Negozi:</strong> ${skate.stores.join(', ')}</p>
                    </div>
                `;
            });

            comparisonGrid.innerHTML = html;
            document.getElementById('comparisonView').classList.add('show');
        }

        function closeComparison() {
            document.getElementById('comparisonView').classList.remove('show');
        }

        function playVideo(video) {
            alert(`üé• Apertura tutorial: ${video}`);
        }

        function resetAllFilters() {
            document.getElementById('footCm').value = '';
            document.getElementById('shoeEu').value = '';
            document.getElementById('shoeUs').value = '';
            document.getElementById('footWidth').value = '';
            document.getElementById('minPrice').value = '';
            document.getElementById('maxPrice').value = '';
            document.getElementById('subLevel').selectedIndex = 0;
            document.getElementById('footShape').selectedIndex = 0;
            document.getElementById('instep').selectedIndex = 0;
            document.getElementById('shellMaterial').selectedIndex = 0;
            document.getElementById('wheelConfig').selectedIndex = 0;
            
            document.querySelectorAll('input[type="checkbox"]').forEach(cb => cb.checked = false);
            document.querySelector('input[name="footDiff"][value="same"]').checked = true;
            
            filterSkates();
        }

        // Inizializzazione
        window.onload = function() {
            updateSublevelOptions();
            displaySkates(skates);
            
            // Aggiungi listener per filtri in tempo reale
            document.querySelectorAll('.filter-input, .filter-select, input[type="checkbox"], input[type="radio"]').forEach(el => {
                el.addEventListener('change', filterSkates);
                el.addEventListener('input', filterSkates);
            });
        };
    </script>
</body>
</html>